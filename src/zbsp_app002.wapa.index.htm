<!DOCTYPE html>                                                                                                                                                                                                                                                
<html lang="en">                                                                                                                                                                                                                                               
  <head>                                                                                                                                                                                                                                                       
    <meta charset="UTF-8" />                                                                                                                                                                                                                                   
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />                                                                                                                                                                                   
    <title>Calling Web Service from jQuery</title>                                                                                                                                                                                                             
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>                                                                                                                                                                                        
    <script type="text/javascript">                                                                                                                                                                                                                            
      $(document).ready(function () {                                                                                                                                                                                                                          
        $("#btnCallWebService").click(function (event) {                                                                                                                                                                                                       
         /* var wsUrl =                                                                                                                                                                                                                                        
            "http://ABAP:8000" +                                                                                                                                                                                                                               
            "/sap/bc/srt/rfc/sap/ztest/001/ztest/rfcreadtable";                                                                                                                                                                                                
*/                                                                                                                                                                                                                                                             
let wsUrl = "http://llrrpp.sap.com:50081/sap/bc/srt/rfc/sap/zwbs_wb_get_airports/001/zwbs_wb_get_airports/zwbs_wb_get_airports";                                                                                                                               
let url = "http://llrrpp.sap.com:50081/sap/bc/srt/wsdl/flv_10002A111AD1/bndg_url/sap/bc/srt/rfc/sap/zwbs_wb_get_airports/001/zwbs_wb_get_airports/zwbs_wb_get_airports?sap-client=001";                                                                        
//let soapMessage = '<soapenv:Envelope xmlns:soapenv=\"http://schemas.xmlsoap.org/soap/envelope/"xmlns:urn=\"urn:sap-com:document:sap:rfc:functions\"><soapenv:Header/><soapenv:Body><urn:ZFM_AIRPORT/></soapenv:Body></soapenv:Envelope>';                    
//let soapMessage2 = '<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:urn="urn:sap-com:document:sap:rfc:functions"><soapenv:Header/><soapenv:Body><urn:ZFM_AIRPORT/></soapenv:Body></soapenv:Envelope>';                     
let soapMessage2 =                                                                                                                                                                                                                                             
  '<soapenv:Envelope xmlns:soapenv=\"http://schemas.xmlsoap.org/soap/envelope/" ' +                                                                                                                                                                            
  'xmlns:urn="urn:sap-com:document:sap:rfc:functions">' +                                                                                                                                                                                                      
  "<soapenv:Header/>" +                                                                                                                                                                                                                                        
  "<soapenv:Body>" +                                                                                                                                                                                                                                           
  "<urn:ZFM_AIRPORT/>" +                                                                                                                                                                                                                                       
  "</soapenv:Body>" +                                                                                                                                                                                                                                          
  "</soapenv:Envelope>";                                                                                                                                                                                                                                       
/*          $.ajax({                                                                                                                                                                                                                                           
            url: wsUrl,                                                                                                                                                                                                                                        
            type: "POST",                                                                                                                                                                                                                                      
            data: soapMessage2,                                                                                                                                                                                                                                
             //contentType: "application/soap+xml; charset=utf-8",                                                                                                                                                                                             
            //action:                                                                                                                                                                                                                                          
            //dataType: "xml",                                                                                                                                                                                                                                 
            headers: {                                                                                                                                                                                                                                         
              "content-type": "text/xml",                                                                                                                                                                                                                      
              "Authorization": "Basic " + btoa("SAPWBS:123456"),                                                                                                                                                                                               
              "Content-Length": soapMessage.length,                                                                                                                                                                                                            
              //"Host": "192.168.204.142"                                                                                                                                                                                                                      
            },                                                                                                                                                                                                                                                 
            success: processSuccess,                                                                                                                                                                                                                           
            error: processError                                                                                                                                                                                                                                
          });                                                                                                                                                                                                                                                  
  */                                                                                                                                                                                                                                                           
         $.ajax({                                                                                                                                                                                                                                              
            type: "POST",                                                                                                                                                                                                                                      
            url: wsUrl,                                                                                                                                                                                                                                        
      //contentType: "application/soap+xml; charset=utf-8",                                                                                                                                                                                                    
           contentType: "text/xml; charset=\"utf-8\"",                                                                                                                                                                                                         
            dataType: "xml",                                                                                                                                                                                                                                   
      data: soapMessage2,                                                                                                                                                                                                                                      
            Authorization: "Basic " + btoa("SAPWBS:123456"),                                                                                                                                                                                                   
            Accept: "*/*",                                                                                                                                                                                                                                     
            success: processSuccess,                                                                                                                                                                                                                           
            error: processError                                                                                                                                                                                                                                
          });                                                                                                                                                                                                                                                  
        });                                                                                                                                                                                                                                                    
      });                                                                                                                                                                                                                                                      
      function processSuccess(data, status, req) {                                                                                                                                                                                                             
        alert("success");                                                                                                                                                                                                                                      
        if (status == "success"){                                                                                                                                                                                                                              
          let xmlDoc = req.responseXML;                                                                                                                                                                                                                        
          let items = xmlDoc.getElementsByTagName("item");                                                                                                                                                                                                     
          let table =                                                                                                                                                                                                                                          
                `<tr><th>Code</th><th>Name</th>                                                                                                                                                                                                                
                    <th>Time Zone</th>                                                                                                                                                                                                                         
                </tr>`;                                                                                                                                                                                                                                        
           for (let i = 0; i < items.length; i++) {                                                                                                                                                                                                            
                table += "<tr><td>" +                                                                                                                                                                                                                          
                    items[i].getElementsByTagName("ID")[0]                                                                                                                                                                                                     
                    .childNodes[0].nodeValue + "</td><td>" +                                                                                                                                                                                                   
                    items[i].getElementsByTagName("NAME")[0]                                                                                                                                                                                                   
                    .childNodes[0].nodeValue + "</td><td>" +                                                                                                                                                                                                   
                    items[i].getElementsByTagName("TIME_ZONE")[0]                                                                                                                                                                                              
                    .childNodes[0].nodeValue + "</td><td>";                                                                                                                                                                                                    
            }                                                                                                                                                                                                                                                  
            // Print the xml data in table form                                                                                                                                                                                                                
            document.getElementById("id").innerHTML = table;                                                                                                                                                                                                   
          //alert(items);                                                                                                                                                                                                                                      
          }                                                                                                                                                                                                                                                    
      }                                                                                                                                                                                                                                                        
      function processError(data, status, req) {                                                                                                                                                                                                               
        alert(req.responseText + " " + status);                                                                                                                                                                                                                
      }                                                                                                                                                                                                                                                        
      function getInfo(){                                                                                                                                                                                                                                      
      }                                                                                                                                                                                                                                                        
    </script>                                                                                                                                                                                                                                                  
  </head>                                                                                                                                                                                                                                                      
  <body>                                                                                                                                                                                                                                                       
    <h3>Calling SAP Web Services via JavaScript with jQuery/AJAX</h3>                                                                                                                                                                                          
    <input id="btnCallWebService" value="Call web service" type="button" />                                                                                                                                                                                    
    <br><br>                                                                                                                                                                                                                                                   
    <table id="id"></table>                                                                                                                                                                                                                                    
  </body>                                                                                                                                                                                                                                                      
</html>                                                                                                                                                                                                                                                        